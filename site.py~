import sys
import spotipy
import spotipy.util as util



def get_user_artists():
    user_list=[]
    username= '1292396678'
    scope = 'user-library-read'
    token = util.prompt_for_user_token(username, scope)
    if token:
        def gettrack(artist_name):
            response = sp.artist_top_tracks(alink)	#getting top track from artist
            for track in response['tracks'][:1]:
	        print(track['name'])

        sp = spotipy.Spotify(auth=token)
        results = sp.current_user_saved_tracks()
        artists = results['items']
        #playlists = sp.user_playlist_create(username, 'Ultimate Playlist')
    
    
        while results['next']:	#collecting all artists
        	results = sp.next(results)
        	artists.extend(results['items'])
	
        before_artist='null'
   
        for item in artists:	
    	    track = item['track']
	    now_artist= track['artists'][0]['name']
	    alink = track['artists'][0]['uri']
	    if now_artist != before_artist:	#getting one artist only
	        #return now_artist
		user_list.append(now_artist)
	        #gettrack(alink)
	        before_artist = now_artist
	    else:
		taco = 1	#temp fix

#	print track['name'] + ' - ' + track['artists'][0]['name']
    

	return user_list
    else:
        print "Can't get token for", username


print get_user_artists('1292396678')

